#!/bin/bash
# Auto Secrets Manager - Debug Environment Wrapper Script

# Try to use installed console script first, fallback to direct module call
if command -v auto-secrets-py >/dev/null 2>&1; then
  exec auto-secrets-py debug "$@"
elif command -v python3 >/dev/null 2>&1; then
  # Find the auto_secrets module path, if run from the source directory without installation
  SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
  AUTO_SECRETS_SRC="$(dirname "$SCRIPT_DIR")"

  if [[ -d "$AUTO_SECRETS_SRC/auto_secrets" ]]; then
    cd "$AUTO_SECRETS_SRC" && exec python3 -m auto_secrets.cli debug "$@"
  else
    echo "ERROR: auto_secrets module not found" >&2
    echo "Try installing the package: pip install -e ." >&2
    exit 1
  fi
else
  echo "ERROR: Neither auto-secrets-py nor python3 found" >&2
  exit 1
fi
